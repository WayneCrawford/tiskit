<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Topics &mdash; obsinfo 0.110 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> obsinfo
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Obsinfo Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/installation.html">Installation and Startup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/execution.html">Executing obsinfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Technical Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">README</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">obsinfo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Advanced Topics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/advanced/_old/advanced_OLD.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="advanced-topics">
<span id="advancedtopics"></span><h1>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline"></a></h1>
<section id="channel-modifications">
<h2>Channel modifications<a class="headerlink" href="#channel-modifications" title="Permalink to this headline"></a></h2>
<p>The full power of <strong>obsinfo</strong> is achieved using channel modifications. Unlike other equipment, OBS are subject to a lot of variations in configuration, even changes of components in the field. The aim of <em>obsinfo</em> is to have a relatively stable database of information files for instrumentation. But in actual operation it is common to reassemble the instrumentation, substituting stages and even whole components. This needs to be reflected in the metadata without compromising the stability of the instrumentation database. The way to do this is through channel modifications, which can change <em>any</em> attribute in the configuration, down to serial numbers or pole/zeros of filters at the channel level.</p>
<p>The attribute <code class="docutils literal notranslate"><span class="pre">channel_modifications</span></code> is used for this. Under this keyword the user can specify a complete hierarchy down to the filter level. Only the value(s) specified will be modified. So if a “leaf” value is changed, such as gain value, only the gain value for a particular stage will be changed. But if a complete sensor is specified, the whole component along with its stages and filters will be modified.</p>
<p>A channel must be identified in order to apply particular modifications to it. Channel identification is performed <strong>not</strong> by the channel label in the <code class="docutils literal notranslate"><span class="pre">channels</span></code> attribute, but by a channel code formed by the orientation and the location in the form:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&lt;orientation</span><span class="nv"> </span><span class="s">code&gt;-&lt;location</span><span class="nv"> </span><span class="s">code&gt;&quot;</span>
</pre></div>
</div>
<p>Recall <a class="reference external" href="Channel">orientation codes</a> are defined as an FDSN standard.</p>
<p>For example,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;Z-02&quot;</span>
</pre></div>
</div>
<p>If location code is omitted, a location code of “00” is assumed as default. Furthermore, it is possible to select all location codes and/or all orientation codes using the “*” notation:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Channel Code</strong></p></td>
<td><p><strong>Result</strong></p></td>
</tr>
<tr class="row-even"><td><p><cite>“*”</cite> or <cite>“*-*”</cite></p></td>
<td><p>All channels</p></td>
</tr>
<tr class="row-odd"><td><p><cite>“*-00”</cite></p></td>
<td><p>All orientations with location “00”</p></td>
</tr>
<tr class="row-even"><td><p><cite>“H-*”</cite></p></td>
<td><p>Channel with “orientation” H and all locations</p></td>
</tr>
<tr class="row-odd"><td><p><cite>“H”</cite></p></td>
<td><p>Channel with “orientation” H and location “00”</p></td>
</tr>
<tr class="row-even"><td><p><cite>“1-01”</cite></p></td>
<td><p>Channel with orientation 1 and location “01”</p></td>
</tr>
</tbody>
</table>
<p>Channel codes have priorities. The more specific code will take precedence over the less specific code,
and the orientation code specification will take precedence over the location code specification. That is
if both <cite>“*-*”</cite> and <cite>“1-01”</cite> are specified, <cite>“1-01”</cite> will take precedence. And if <cite>“*-00”</cite> and <cite>“H-*”</cite>
are specified, <cite>“*-00”</cite> will take precedence.</p>
<p>The question of how to specify a particular stage arises, since stages have no name. Stages will then be referenced by their number, which, starting with zero, specifies the position of the stage within a given component (sensor, preamplifier or datalogger). Modifications to stages are specified under the keyword <code class="docutils literal notranslate"><span class="pre">response_modifications</span></code>, as the keyword <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> will completely overwrite all stages.</p>
<p>So, if we want to change the gain of a particular stage, the third one in the sensor, the hierarchy would look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel_modifications</span><span class="p">:</span>
    <span class="nt">sensor</span><span class="p">:</span>
        <span class="nt">response_modifications</span><span class="p">:</span>
          <span class="s">&quot;2&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nt">gain</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">value</span><span class="p">:</span> <span class="nv">17</span><span class="p p-Indicator">}}</span>
</pre></div>
</div>
<p>If we, however, want to replace all of the response stages, the file would look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel_modifications</span><span class="p">:</span>
    <span class="nt">datalogger</span><span class="p">:</span>
        <span class="nt">response_stages</span><span class="p">:</span>
           <span class="p p-Indicator">-</span> <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;responses/CS5321_FIR1.stage.yaml#stage&quot;</span>
           <span class="p p-Indicator">-</span> <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;responses/CS5322_FIR2.stage.yaml#stage&quot;</span>
           <span class="p p-Indicator">-</span> <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;responses/CS5322_FIR2.stage.yaml#stage&quot;</span>
           <span class="p p-Indicator">-</span> <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;responses/CS5322_FIR3.stage.yaml#stage&quot;</span>
</pre></div>
</div>
<p>Finally, if we want to modify a complete component, the file would look something like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel_modifications</span><span class="p">:</span>
    <span class="nt">datalogger</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;dataloggers/LC2000.datalogger.yaml#datalogger&quot;</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>Response modifications are very flexible. THe label can be any of several regular expressions. Either the single number, as above, a list, a range or a wildcard “*”, which means all:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Stage Number</strong></p></td>
<td><p><strong>Result</strong></p></td>
</tr>
<tr class="row-even"><td><p><cite>“*”</cite></p></td>
<td><p>All stages</p></td>
</tr>
<tr class="row-odd"><td><p>“[1,2,3]”</p></td>
<td><p>Second, third and fourth stages (stages start at 0)</p></td>
</tr>
<tr class="row-even"><td><p>“[1-3]”</p></td>
<td><p>Same as above</p></td>
</tr>
</tbody>
</table>
<p>Here is a complete example of a network file with channel_modifications:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">format_version</span><span class="p">:</span> <span class="s">&quot;0.110&quot;</span>
<span class="nt">yaml_anchors</span><span class="p">:</span>
   <span class="nt">obs_clock_correction_linear_defaults</span><span class="p">:</span> <span class="nl">&amp;LINEAR_CLOCK_DEFAULTS</span>
       <span class="nt">time_base</span><span class="p">:</span> <span class="s">&quot;Seascan</span><span class="nv"> </span><span class="s">MCXO,</span><span class="nv"> </span><span class="s">~1e-8</span><span class="nv"> </span><span class="s">nominal</span><span class="nv"> </span><span class="s">drift&quot;</span>
       <span class="nt">reference</span><span class="p">:</span> <span class="s">&quot;GPS&quot;</span>
       <span class="nt">start_sync_instrument</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">revision</span><span class="p">:</span>
   <span class="nt">authors</span><span class="p">:</span>
       <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;authors/Wayne_Crawford.author.yaml#author&quot;</span><span class="p p-Indicator">}</span>
   <span class="nt">date</span><span class="p">:</span> <span class="s">&quot;2019-12-19&quot;</span>
<span class="nt">network</span><span class="p">:</span>
   <span class="nt">facility</span><span class="p">:</span>
       <span class="nt">reference_name</span><span class="p">:</span> <span class="s">&quot;INSU-IPGP&quot;</span>
       <span class="nt">full_name</span><span class="p">:</span> <span class="s">&quot;INSU-IPGP</span><span class="nv"> </span><span class="s">OBS</span><span class="nv"> </span><span class="s">Park&quot;</span>
       <span class="nt">contact</span><span class="p">:</span>
          <span class="nt">first_name</span><span class="p">:</span> <span class="s">&quot;Wayne&quot;</span>
          <span class="nt">last_name</span><span class="p">:</span> <span class="s">&quot;Crawford&quot;</span>

       <span class="nt">email</span><span class="p">:</span>  <span class="s">&quot;crawford@ipgp.fr&quot;</span>

       <span class="nt">website</span><span class="p">:</span>  <span class="s">&quot;http://ipgp.fr&quot;</span>

   <span class="nt">campaign_ref_name</span><span class="p">:</span> <span class="s">&quot;MYCAMPAIGN&quot;</span>
   <span class="nt">network_info</span><span class="p">:</span>
       <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;network_info/EMSO-MOMAR.network_info.yaml#network_info&quot;</span>

   <span class="nt">stations</span><span class="p">:</span>
       <span class="s">&quot;BB_1&quot;</span><span class="p p-Indicator">:</span>
           <span class="nt">site</span><span class="p">:</span> <span class="s">&quot;My</span><span class="nv"> </span><span class="s">favorite</span><span class="nv"> </span><span class="s">site&quot;</span>
           <span class="nt">start_date</span><span class="p">:</span> <span class="s">&quot;2015-04-23T10:00:00&quot;</span>
           <span class="nt">end_date</span><span class="p">:</span> <span class="s">&quot;2016-05-28T15:37:00&quot;</span>
           <span class="nt">location_code</span><span class="p">:</span> <span class="s">&quot;00&quot;</span>
           <span class="nt">instrumentation</span><span class="p">:</span>
               <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;instrumentation/BBOBS1_2012+.instrumentation.yaml#instrumentation&quot;</span>
           <span class="nt">channel_modifications</span><span class="p">:</span>
               <span class="s">&quot;*-*&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nt">datalogger_configuration</span><span class="p">:</span> <span class="s">&quot;62.5sps&quot;</span><span class="p p-Indicator">}</span>
           <span class="nt">locations</span><span class="p">:</span>
               <span class="s">&quot;00&quot;</span><span class="p p-Indicator">:</span>
                   <span class="nt">base</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;location_bases/BUC_DROP.location_base.yaml#location_base&#39;</span><span class="p p-Indicator">}</span>
                   <span class="nt">position</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">lon</span><span class="p">:</span> <span class="nv">-32.234</span><span class="p p-Indicator">,</span><span class="nt"> lat</span><span class="p">:</span> <span class="nv">37.2806</span><span class="p p-Indicator">,</span><span class="nt"> elev</span><span class="p">:</span> <span class="nv">-1950</span><span class="p p-Indicator">}</span>
           <span class="nt">processing</span><span class="p">:</span>
               <span class="p p-Indicator">-</span> <span class="nt">clock_corrections</span><span class="p">:</span>
                   <span class="nt">linear_drift</span><span class="p">:</span>
                       <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*LINEAR_CLOCK_DEFAULTS</span>
                       <span class="nt">start_sync_reference</span><span class="p">:</span> <span class="s">&quot;2015-04-23T11:20:00&quot;</span>
                       <span class="nt">start_sync_instrument</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
                       <span class="nt">end_sync_reference</span><span class="p">:</span> <span class="s">&quot;2016-05-27T14:00:00.2450&quot;</span>
                       <span class="nt">end_sync_instrument</span><span class="p">:</span> <span class="s">&quot;22016-05-27T14:00:00&quot;</span>
       <span class="s">&quot;BB_2&quot;</span><span class="p p-Indicator">:</span>
           <span class="nt">notes</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;An</span><span class="nv"> </span><span class="s">example</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">changing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">sensor&quot;</span><span class="p p-Indicator">]</span>
           <span class="nt">site</span><span class="p">:</span> <span class="s">&quot;My</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">favorite</span><span class="nv"> </span><span class="s">site&quot;</span>
           <span class="nt">start_date</span><span class="p">:</span> <span class="s">&quot;2015-04-23T10:00:00Z&quot;</span>
           <span class="nt">end_date</span><span class="p">:</span> <span class="s">&quot;2016-05-28T15:37:00Z&quot;</span>
           <span class="nt">location_code</span><span class="p">:</span> <span class="s">&quot;00&quot;</span>
           <span class="nt">instrumentation</span><span class="p">:</span>
               <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;instrumentation/BBOBS1_2012+.instrumentation.yaml#instrumentation&quot;</span>
           <span class="nt">channel_modifications</span><span class="p">:</span>
              <span class="s">&quot;*-*&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nt">sensor</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">equipment</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">serial_number</span><span class="p">:</span> <span class="s">&quot;Sphere06&quot;</span><span class="p p-Indicator">}},</span><span class="nt"> datalogger_configuration</span><span class="p">:</span> <span class="s">&quot;62.5sps&quot;</span><span class="p p-Indicator">}</span>
              <span class="s">&quot;H-*&quot;</span><span class="p p-Indicator">:</span>
                 <span class="nt">sensor</span><span class="p">:</span>
                   <span class="nt">equipment</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">serial_number</span><span class="p">:</span> <span class="s">&quot;IP007&quot;</span><span class="p p-Indicator">}</span>
                   <span class="nt">response_modifications</span><span class="p">:</span>
                     <span class="s">&quot;3&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nt">gain</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">value</span><span class="p">:</span> <span class="nv">15</span><span class="p p-Indicator">}}</span>
           <span class="nt">locations</span><span class="p">:</span>
               <span class="s">&quot;00&quot;</span><span class="p p-Indicator">:</span>
                   <span class="nt">base</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;location_bases/BUC_DROP.location_base.yaml#location_base&#39;</span><span class="p p-Indicator">}</span>
                   <span class="nt">position</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">lon</span><span class="p">:</span> <span class="nv">-32.29756</span><span class="p p-Indicator">,</span><span class="nt"> lat</span><span class="p">:</span> <span class="nv">37.26049</span><span class="p p-Indicator">,</span><span class="nt"> elev</span><span class="p">:</span> <span class="nv">-1887</span><span class="p p-Indicator">}</span>
           <span class="nt">processing</span><span class="p">:</span>
               <span class="p p-Indicator">-</span> <span class="nt">clock_correct_linear_drift</span><span class="p">:</span>
                       <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*LINEAR_CLOCK_DEFAULTS</span>
                       <span class="nt">start_sync_reference</span><span class="p">:</span> <span class="s">&quot;2015-04-22T12:24:00&quot;</span>
                       <span class="nt">start_sync_instrument</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
                       <span class="nt">end_sync_reference</span><span class="p">:</span> <span class="s">&quot;2016-05-28T15:35:00.3660&quot;</span>
                       <span class="nt">end_sync_instrument</span><span class="p">:</span> <span class="s">&quot;2016-05-28T15:35:02&quot;</span>
</pre></div>
</div>
</section>
<section id="arol-compatibility">
<span id="arol11"></span><h2>AROL compatibility<a class="headerlink" href="#arol-compatibility" title="Permalink to this headline"></a></h2>
<p>One of the objectives of <em>obsinfo</em> is to be compatible with the AROL instrumentation database. AROL is a yaml-based instrumentation database which can be explored through the Yasmine application. Its syntax is heavily based on an earlier version of <em>obsinfo</em>, v0.106. Efforts are underway to make the syntax of the current version of <em>obsinfo</em> and of AROL be as close as possible. However, since the philosophy is somewhat different, some discrepancies will be inevitable. AROL builds a configuration out of user choices made with the Yasmine tool. <em>obsinfo</em> lists all available configurations and lets the user choose using the configuration fields (<code class="docutils literal notranslate"><span class="pre">sensor_configuration</span></code>, <code class="docutils literal notranslate"><span class="pre">preamplifier_configuration</span></code>, <code class="docutils literal notranslate"><span class="pre">datalogger_configuration</span></code>) in a station or network information file.</p>
<p>The current effort is to make AROL yaml files readable by <em>obsinfo</em>. However, there are some outstanding issues:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>AROL does not have an offset field in its filter information files. It has a field called <code class="docutils literal notranslate"><span class="pre">delay.samples</span></code> which fulfills the same function. Proposed solution: let AROL change name. If not possible, read the AROL file and change within the <em>obsinfo</em> application.</p></li>
<li><p>AROL uses <code class="docutils literal notranslate"><span class="pre">units</span></code> instead of <code class="docutils literal notranslate"><span class="pre">transfer_function_type</span></code> in Pole/Zero filters. Their value is directly translatable, via a table, to the <code class="docutils literal notranslate"><span class="pre">transfer_function_type</span></code> enumeration used by StationXML (see table below). Proposed solution: let AROL change names. If not possible, read the AROL file and change within the <em>obsinfo</em> application.</p></li>
</ol>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>AROL unit</strong></p></td>
<td><p><strong>obsinfo/StationXML equivalent</strong></p></td>
</tr>
<tr class="row-even"><td><p>“rad/s”</p></td>
<td><p>“LAPLACE (RADIANS/SECOND)”</p></td>
</tr>
<tr class="row-odd"><td><p>“hz”</p></td>
<td><p>“LAPLACE (HERTZ)”</p></td>
</tr>
<tr class="row-even"><td><p>“z-transform”</p></td>
<td><p>“DIGITAL (Z-TRANSFORM)”</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ol class="arabic simple" start="3">
<li><p>AROL names of “fake” filters ANALOG, DIGITAL and AD_CONVERSION are in CamelCase in <em>obsinfo</em>: Analog, Digital, ADConversion to be consistent with StationXML Proposed solution: let AROL change name. If not possible, read the AROL file and change within the <em>obsinfo</em> application.</p></li>
<li><p>AROL specifies both <code class="docutils literal notranslate"><span class="pre">input_sample_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">output_sample_rate</span></code> for all stages. <em>obsinfo</em> only specifies the input sample rate for the first stage in the whole instrument. It calculates all the other values out of decimation factors. This gives more flexibility to the definition of each individual stage in the <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> field of an information file. Proposed solution: read the AROL file and ignore these fields within the <em>obsinfo</em> application.</p></li>
<li><p>AROL specifies response stages thus:</p></li>
</ol>
</div></blockquote>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">response</span><span class="p">:</span>
  <span class="nt">decimation_info</span><span class="p">:</span>
    <span class="nt">delay_correction</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">stages</span><span class="p">:</span>
</pre></div>
</div>
<p><em>obsinfo</em> simply specifies <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> and the <code class="docutils literal notranslate"><span class="pre">delay_correction</span></code> attribute is specified at the <code class="docutils literal notranslate"><span class="pre">datalogger</span></code> level,
as it is the only place where it makes sense for the global instrument. Also, <code class="docutils literal notranslate"><span class="pre">delay_correction</span></code> is specified as either
boolean in AROL or  as a real number. In <em>obsinfo</em> a value of <code class="docutils literal notranslate"><span class="pre">None</span></code> is equivalent to AROL <code class="docutils literal notranslate"><span class="pre">False</span></code> and a numeric value
is equivalent to AROL <code class="docutils literal notranslate"><span class="pre">True</span></code>. Proposed solution: make <em>obsinfo</em> read the AROL file and interpret this attribute. If found in a response
other than the datalogger, give a warning and ignore.</p>
</section>
<section id="notes-best-practices-and-caveats">
<h2>Notes, best practices and caveats<a class="headerlink" href="#notes-best-practices-and-caveats" title="Permalink to this headline"></a></h2>
<section id="best-practice-place-instrumentation-information-files-in-a-central-repository">
<h3>Best practice: Place instrumentation information files in a central repository<a class="headerlink" href="#best-practice-place-instrumentation-information-files-in-a-central-repository" title="Permalink to this headline"></a></h3>
<p>One of the main pillars of <em>obsinfo</em> philosophy is reuse and the DRY (don’t repeat yourself) principle. In order to achieve this every effort has been made to ensure reusability, but the ultimate responsibiity for this lies with the user. It is strongly recommended to create a central repository of instrumentation information files which can then be reused by several campaigns. Instrumentations should be flexible enough, with several typical configurations, so the need to make modifications through <code class="docutils literal notranslate"><span class="pre">channel_modifications</span></code> is minimized.</p>
<p>The use of a central repository will also permit information to be protected assigning modification writes only to the responsible parties.</p>
<p>Campaign, network and station files can then be placed in different directories according to users and teams.</p>
</section>
<section id="best-practice-use-a-file-hierarchy-for-different-objects">
<h3>Best practice: Use a file hierarchy for different objects<a class="headerlink" href="#best-practice-use-a-file-hierarchy-for-different-objects" title="Permalink to this headline"></a></h3>
<p>Although <em>obsinfo</em> gives you total flexibility to organize your files as you see fit,
it is recommended to use a hierarchy of directories and the <code class="docutils literal notranslate"><span class="pre">obsinfo_datapath</span></code> variable setup
with the <code class="docutils literal notranslate"><span class="pre">obsinfo-setup</span></code> application, whose used is explained in the <a class="reference internal" href="../../general/installation.html#installstartup"><span class="std std-ref">Installation and Startup Guide</span></a>.</p>
</section>
<section id="best-practice-validate-all-information-files-bottom-up">
<h3>Best practice: Validate all information files bottom up<a class="headerlink" href="#best-practice-validate-all-information-files-bottom-up" title="Permalink to this headline"></a></h3>
<p>Before trying to create a Station XML file, all information files should be validated individually. The best way to do this is to proceed bottom up: first validate filters, then stages, then components, then instrumentations, then networks. This way one can avoid very large output messages which are difficult to parse.</p>
<p>Files in central repositories should never be uploaded unless they’re previously validated. Conversely, users can assume they don’t have any need to validate central repositories.</p>
</section>
<section id="best-practice-verification-of-response-stages-in-information-file">
<h3>Best practice: Verification of <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> in information file<a class="headerlink" href="#best-practice-verification-of-response-stages-in-information-file" title="Permalink to this headline"></a></h3>
<p>All files in central repositories must be validated before being uploaded. It is good practice to validate your files from the bottom up. That is, validate filter files first, stage next, and so on to network, unless you’re using (already verified) central repository files. This is to avoid long and unreadable messages from the validator.</p>
</section>
<section id="best-practice-reuse-information-files">
<h3>Best practice: Reuse information files<a class="headerlink" href="#best-practice-reuse-information-files" title="Permalink to this headline"></a></h3>
<p>Either create a repository of your own or use one of the central repository. If you plan on working offline, you can clone the GitLab repository locally.</p>
</section>
<section id="best-practice-document-information-files-with-notes-extras-and-comments">
<h3>Best practice: Document information files with notes, extras and comments<a class="headerlink" href="#best-practice-document-information-files-with-notes-extras-and-comments" title="Permalink to this headline"></a></h3>
<p>A choice of documentation options are available in information files. Aside of the “#” comment mechanism of the YAML language, <code class="docutils literal notranslate"><span class="pre">notes</span></code> are used for <em>obsinfo</em> documentation that will <strong>not</strong> be reflected in the resulting StationXML file. On the other hand, <code class="docutils literal notranslate"><span class="pre">comments</span></code> can be used at the <code class="docutils literal notranslate"><span class="pre">network</span></code>, <code class="docutils literal notranslate"><span class="pre">station</span></code> and <code class="docutils literal notranslate"><span class="pre">channel</span></code> levels which will be incorporated into the StationXML file. The reason to not extend this to <code class="docutils literal notranslate"><span class="pre">stage</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code> is that the resulting StationXML file would be cluttered with repeated comments. Similarly, at the same levels, <code class="docutils literal notranslate"><span class="pre">extras</span></code> can be specified. These take the form of key/value pairs to simulate attributes which are not actually present in StationXML but can be used for documentation. A typical example is:
.. code-block:: yaml</p>
<blockquote>
<div><p>DBIRD_response_type : “CALIBRATED”</p>
</div></blockquote>
<p>which is used in several filters. It should be specified at the channel level, though, perharps specifying to which filters it applies.</p>
</section>
<section id="caveat-effect-of-ref">
<h3>Caveat: Effect of <code class="docutils literal notranslate"><span class="pre">$ref</span></code><a class="headerlink" href="#caveat-effect-of-ref" title="Permalink to this headline"></a></h3>
<p>In every case, the use of <code class="docutils literal notranslate"><span class="pre">$ref</span></code> is to totally substitute that line by the content referenced in the file path (under the “#” tag). It is completely equivalent to write the content of referenced file instead of the <code class="docutils literal notranslate"><span class="pre">$ref</span></code> line. This should be taken into account for syntax purposes. If syntax is not validated, a very good chance is that the <code class="docutils literal notranslate"><span class="pre">$ref</span></code> file syntax is either wrong or in the wrong place. Not finding the file also causes problems which are not evident at first glance; if you keep getting errors, check if the file is in the right place.</p>
</section>
<section id="caveat-cryptic-syntax-messages">
<h3>Caveat: Cryptic syntax messages<a class="headerlink" href="#caveat-cryptic-syntax-messages" title="Permalink to this headline"></a></h3>
<p>Unfortunately, the JSON/YAML parser is very terse reporting syntax errors such as unmatched parentheses, brackets or curly brackets, single items instead of lists, etc., usually result in an exception with a cryptic message. It is <em>strongly</em> recommended that YAML files are edited in a suitable editor which can check at least basic syntax errors. See also the Troubleshooting section below.</p>
</section>
<section id="caveat-use-of-response-stages">
<h3>Caveat: Use of response stages<a class="headerlink" href="#caveat-use-of-response-stages" title="Permalink to this headline"></a></h3>
<p>Although response stages are specified at the component (sensor, preamplifier and datalogger) level, in the end they are considered as a single response for the whole instrument. Response stages are taken in this order: sensor stages, preamplifier stages and datalogger stages, irrespective of the order in which components appear in the information file. Within a component, they are taken in the order specified in the information file. In the end, they are numbered from one to <em>n</em> for the whole response.</p>
</section>
<section id="caveat-treatment-of-sample-rates-in-response-stages">
<h3>Caveat: Treatment of sample rates in response stages<a class="headerlink" href="#caveat-treatment-of-sample-rates-in-response-stages" title="Permalink to this headline"></a></h3>
<p>Only the input sample rate should be specified for a response, starting in the ADConversion stage. All other input and output rate are calculated using the decimation factor of each digital stage. Therefore, <code class="docutils literal notranslate"><span class="pre">input_sample_rate</span></code> and <code class="docutils literal notranslate"><span class="pre">output_sample_rate</span></code> should never be specified for later digital stages, and decimation factor should <em>always</em> be specified for them.</p>
<p>Total sample rate is calculated for the whole response and checked against the sample rate specified in the datalogger. A warning will be issued if they are different.</p>
</section>
<section id="best-practice-placement-of-response-stages-in-information-file">
<h3>Best practice: Placement of <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> in information file<a class="headerlink" href="#best-practice-placement-of-response-stages-in-information-file" title="Permalink to this headline"></a></h3>
<p>Although <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> can be specified outside the <code class="docutils literal notranslate"><span class="pre">configuration_definitions</span></code>, this is discouraged unless there is a single configuration. If there are several configurations, <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> should be specified in the <code class="docutils literal notranslate"><span class="pre">configuration_definitions</span></code>. Nevertheless, if <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> is specified outside and there are several <code class="docutils literal notranslate"><span class="pre">configuration_definitions</span></code>, the one selected will overwrite the <code class="docutils literal notranslate"><span class="pre">response_stages</span></code>. If no configuration is specified, the <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> outside will be used.</p>
<p>In the following example, “responses/INSU_BBOBS_gain0.225_theoretical.stage.yaml” will <em>always</em> be overwritten by “responses/INSU_SPOBS_L28x128_theoretical.stage.yaml#stage”, as there is a configuration default which corresponds to the configuration definition “128x gain”.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">preamplifier</span><span class="p">:</span>
    <span class="nt">equipment</span><span class="p">:</span>
        <span class="nt">model</span><span class="p">:</span> <span class="s">&quot;GEOPHONE-GAIN&quot;</span>
        <span class="nt">type</span><span class="p">:</span> <span class="s">&quot;Analog</span><span class="nv"> </span><span class="s">gain/filter</span><span class="nv"> </span><span class="s">card&quot;</span>
        <span class="nt">description</span><span class="p">:</span> <span class="s">&quot;SIO</span><span class="nv"> </span><span class="s">gain/filter</span><span class="nv"> </span><span class="s">card,</span><span class="nv"> </span><span class="s">seismo</span><span class="nv"> </span><span class="s">channel&quot;</span>
        <span class="nt">manufacturer</span><span class="p">:</span> <span class="s">&quot;SIO</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">IPGP&quot;</span>
        <span class="nt">vendor</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
    <span class="nt">configuration_default</span><span class="p">:</span> <span class="s">&quot;128x</span><span class="nv"> </span><span class="s">gain&quot;</span>
    <span class="nt">response_stages</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;responses/INSU_BBOBS_gain0.225_theoretical.stage.yaml#stage&quot;</span> <span class="c1"># THIS WILL BE OVERWRITTEN</span>
    <span class="nt">configuration_definitions</span><span class="p">:</span>
        <span class="s">&quot;128x</span><span class="nv"> </span><span class="s">gain&quot;</span><span class="p p-Indicator">:</span>
            <span class="nt">response_stages</span><span class="p">:</span>
               <span class="p p-Indicator">-</span> <span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;responses/INSU_SPOBS_L28x128_theoretical.stage.yaml#stage&quot;</span>
</pre></div>
</div>
<p>Due to this, the best practice dictates that, in the presence of <code class="docutils literal notranslate"><span class="pre">configuration_definitions</span></code>,
the <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> in bold should be omitted. If <code class="docutils literal notranslate"><span class="pre">configuration_default</span></code> were not present and no configuration is selected at the channel/instrument level, a warning will be issued and the <code class="docutils literal notranslate"><span class="pre">response_stages</span></code> in bold will be used. If no response stages can be selected then an exception will be raised and the program will exit with error.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>The following example, though, is perfectly OK, as there is a single configuration and no need to specify <code class="docutils literal notranslate"><span class="pre">configuration_definitions</span></code>:</p>
<blockquote>
<div><dl class="simple">
<dt>preamplifier:</dt><dd><dl class="simple">
<dt>equipment:</dt><dd><p>model: “GEOPHONE-GAIN”
type: “Analog gain/filter card”
description: “SIO gain/filter card, seismo channel”
manufacturer: “SIO or IPGP”
vendor: “”</p>
</dd>
<dt>response_stages:</dt><dd><ul class="simple">
<li><p>$ref: “responses/INSU_BBOBS_gain0.225_theoretical.stage.yaml#stage”</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</section>
<section id="best-practice-how-to-modify-individual-stages">
<h3>Best practice: How to modify individual stages<a class="headerlink" href="#best-practice-how-to-modify-individual-stages" title="Permalink to this headline"></a></h3>
<p>Individual stage modification must always be specified in <code class="docutils literal notranslate"><span class="pre">response_modifications</span></code> at the instrument component level. This will NOT work:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">preamplifier</span><span class="p">:</span>
   <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;preamplifiers/LCHEAPO_BBOBS.preamplifier.yaml#preamplifier&quot;</span><span class="p p-Indicator">}</span>
   <span class="nt">gain</span><span class="p">:</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">34</span>
</pre></div>
</div>
<p>This will:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">preamplifier</span><span class="p">:</span>
   <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;preamplifiers/LCHEAPO_BBOBS.preamplifier.yaml#preamplifier&quot;</span><span class="p p-Indicator">}</span>
   <span class="nt">response_modifications</span><span class="p">:</span>
      <span class="s">&quot;*&quot;</span><span class="p p-Indicator">:</span> <span class="nt">gain</span><span class="p">:</span>
             <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">34</span>
</pre></div>
</div>
</section>
<section id="best-practice-use-of-channel-modifications">
<h3>Best practice: Use of channel modifications<a class="headerlink" href="#best-practice-use-of-channel-modifications" title="Permalink to this headline"></a></h3>
<p>It should be the aim to create a large and flexible instrumentation database with lots of possible configurations. This way, channel modifications will be rarely used. In fact, it is recommended to use channel modifications sparingly. Ir they must be used, remember to <strong>always</strong> use the adequate syntax. No shortcuts are allowed. All the hierarchical syntax must be used. For example, to change the gain of a sensor stage you need to write:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel_modifications</span><span class="p">:</span>
   <span class="nt">sensor</span><span class="p">:</span>
       <span class="p p-Indicator">{</span><span class="nt">$ref</span><span class="p">:</span> <span class="s">&quot;sensors/SIO_DPG.sensor.yaml#sensor&quot;</span><span class="p p-Indicator">}</span>
       <span class="nt">response_modifications</span><span class="p">:</span>
         <span class="s">&quot;*&quot;</span><span class="p p-Indicator">:</span> <span class="nt">gain</span><span class="p">:</span>
                <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">34</span>
</pre></div>
</div>
<p>and not a shortcut such as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel_modifications</span><span class="p">:</span>
   <span class="nt">gain</span><span class="p">:</span>
     <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">34</span>
</pre></div>
</div>
<p>as there is no way <em>obsinfo</em> can determine to which stage of which component to apply the modification in gain.</p>
</section>
<section id="note-date-formats">
<h3>Note: Date formats<a class="headerlink" href="#note-date-formats" title="Permalink to this headline"></a></h3>
<p>Dates can be entered in regular “dd/mm/yyyy” format or in UTC format, either “yyyy-mm-dd” or
“yyyy-mm-ddThh:mm:ss” or “yyyy-mm-ddThh:mm:ssZ”, according to norm
<a class="reference external" href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>. The difference between the latter two formats
is that the first represents local time and the second UTC time. The norm allows you to specify
hours respective to UTC by adding or subtracting. This particular format is not allowed in <em>obsinfo</em>.
Separators can be either “/” or “-“.</p>
<p>Dates in other formats will result in an exception.</p>
<p>No effort is made to validate if dates are legal, i.e., to reject dates such as “31/02/2021”.</p>
</section>
<section id="best-practice-how-to-use-notes">
<h3>Best practice: How to use notes<a class="headerlink" href="#best-practice-how-to-use-notes" title="Permalink to this headline"></a></h3>
<p>There is a single <code class="docutils literal notranslate"><span class="pre">notes</span></code> attribute in JSON/YAML files, which contains a list of notes, in order to make documentation more systematic. However, sometimes a user may want to comment a piece of the file (for example, a single station in a network file). To do so we recommend using the YAML notation for comments, “#” followed by the comment text. Currently there is no way to do this in JSON files.</p>
</section>
<section id="best-practice-base-your-info-files-in-templates">
<h3>Best practice: base your info files in templates<a class="headerlink" href="#best-practice-base-your-info-files-in-templates" title="Permalink to this headline"></a></h3>
<p>While syntax may be a challenge, we recommend strongly that, when starting a new information file, you use a template. That way at least you can guarantee that the indentation and spelling of attributes is right.</p>
</section>
<section id="caveat-always-follow-the-syntax-and-beware-of-ref-overwriting-your-attributes">
<h3>Caveat: ALWAYS follow the syntax and beware of $ref overwriting your attributes<a class="headerlink" href="#caveat-always-follow-the-syntax-and-beware-of-ref-overwriting-your-attributes" title="Permalink to this headline"></a></h3>
<p>A naïve approach to syntax might think that we can add fields, for example, to a $ref information file. For example, the file could be an instrumentation file and we could decide to add a datalogger configuration which is not present in the file:</p>
<p>..block-code:: yaml</p>
<blockquote>
<div><dl class="simple">
<dt>instrumentation:</dt><dd><p>“$ref” : “instrumentations/BBOBS1_2012+.instrumentation.yaml”
datalogger_config: “62.5sps”</p>
</dd>
</dl>
</div></blockquote>
<p>This is wrong. First, it is the wrong syntax: what channel with the configuration be applied to? There is no indication of that. Remember: modifications should always follow the same syntax. If <code class="docutils literal notranslate"><span class="pre">datalogger_config</span></code> belongs under a channel, it should always be applied to a channel.</p>
<p>But there is another problem. “$ref” will substitute all attributes at the same level, thus erasing the attribute <code class="docutils literal notranslate"><span class="pre">datalogger_config</span></code>. If this happens it will be a silent error, since substitution occurs before validation and the application will never know <code class="docutils literal notranslate"><span class="pre">datalogger_config</span></code> was there. The correct way of applying <code class="docutils literal notranslate"><span class="pre">datalogger_config</span></code> is through <code class="docutils literal notranslate"><span class="pre">channel_modifications</span></code> at the station level.</p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"></a></h2>
<p>Sometimes it is a challenge to understand where an error lies in an information file. Messages are sometimes cryptic. We recommend you use the best practice above of using templates to avoid indentation errors. Also, if you can, use the best practice of working with an editor which recognizes elementary YAML errors such as indentation or wrong parentheses balancing. Let’s review the most common sources of error:</p>
<p>1) <code class="docutils literal notranslate"><span class="pre">JSONEncodeError/EOF</span></code>.
An error which raises a JSONEncodeError exception and/or <code class="docutils literal notranslate"><span class="pre">EOF</span> <span class="pre">(end</span> <span class="pre">of</span> <span class="pre">file)</span> <span class="pre">reached</span> <span class="pre">prematurely</span></code>. This is the most serious error, as it stops processing of the information file and exits the program. It is usually due to:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Indentation</p></li>
<li><p>Unmatched double or single quotes, parentheses, brackets, curly brackets</p></li>
<li><p>Extra commas or not enough commas</p></li>
</ol>
</div></blockquote>
<p>Check for these, if possible, with an editor which shows matching signs. Use templates if possible. If everything else fails, try to reduce the information file to a bare bones version, see if the error persists. If it doesn’t, add new attributes gradually. For example, a network file might have this kind of problem. Temporarily eliminate attributes such as <code class="docutils literal notranslate"><span class="pre">channel_modifications</span></code> and reduce the network to a single station.</p>
<p>2) <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">not</span> <span class="pre">found:</span> <span class="pre">&lt;filename&gt;</span></code>.
&lt;filename&gt; has not been found. Either the directory where the file exists is not correctly specified in the path of the argument or in OBSINFO-DATAPATH, or the &lt;filename&gt;  is misspelled or the file does not exist. This is typical for files referenced in <code class="docutils literal notranslate"><span class="pre">$ref</span></code>.</p>
<p>3) Validation error: <code class="docutils literal notranslate"><span class="pre">&lt;YAML</span> <span class="pre">expression&gt;</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">valid</span> <span class="pre">under</span> <span class="pre">any</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">given</span> <span class="pre">schemas</span></code>.
This means that the information file is recognized and correctly parsed, but the portion &lt;YAML expression&gt; is not recognized. This may be due to illegal values, illegal value type (e.g. a string instead of a number, or a string pattern which does not correspond to valid patterns. An example is the wrong version:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="s">&#39;format_version&#39;</span><span class="p p-Indicator">]:</span> <span class="s">&#39;0.107&#39;</span> <span class="l l-Scalar l-Scalar-Plain">is not valid under any of the given schemas</span>
</pre></div>
</div>
<p>or a phone number with letters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;revision&#39;</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-11-30&#39;</span><span class="p">,</span> <span class="s1">&#39;authors&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Wayne&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Crawford&#39;</span><span class="p">,</span> <span class="s1">&#39;institution&#39;</span><span class="p">:</span> <span class="s1">&#39;IPGP&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;crawford@ipgp.fr&#39;</span><span class="p">,</span> <span class="s1">&#39;phones&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;+33A 01 83 95 76 63&#39;</span><span class="p">}]]}</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">valid</span> <span class="n">under</span> <span class="nb">any</span> <span class="n">of</span> <span class="n">the</span> <span class="n">given</span> <span class="n">schemas</span><span class="o">.</span>
</pre></div>
</div>
<p>or a string instead of a list (in the phones attribute):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;revision&#39;</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-11-30&#39;</span><span class="p">,</span> <span class="s1">&#39;authors&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;first_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Wayne&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Crawford&#39;</span><span class="p">,</span> <span class="s1">&#39;institution&#39;</span><span class="p">:</span> <span class="s1">&#39;IPGP&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;crawford@ipgp.fr&#39;</span><span class="p">,</span> <span class="s1">&#39;phones&#39;</span><span class="p">:</span> <span class="s1">&#39;+33A 01 83 95 76 63&#39;</span><span class="p">}]}</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">valid</span> <span class="n">under</span> <span class="nb">any</span> <span class="n">of</span> <span class="n">the</span> <span class="n">given</span> <span class="n">schemas</span>
</pre></div>
</div>
<p>One possibility with validation errors is that the output of the message may be too long and difficult to parse, as it shows the whole produced information files with all its subfiles. The way to avoid this is to apply the best practice of validation bottom-up: first validate filters, then stages, then components, then instrumentations, then networks. This way the output is manageable.</p>
<p>4) Validation error: <code class="docutils literal notranslate"><span class="pre">Additional</span> <span class="pre">properties</span> <span class="pre">are</span> <span class="pre">not</span> <span class="pre">allowed</span> <span class="pre">(&lt;attribute</span> <span class="pre">name&gt;</span> <span class="pre">was</span> <span class="pre">unexpected)</span></code>
An attribute name was not recognized, either because it was misspelled or because it does not exist in the specification.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;operator&#39;</span><span class="p">]:</span> <span class="n">Additional</span> <span class="n">properties</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">allowed</span> <span class="p">(</span><span class="s1">&#39;fulsdl_name&#39;</span> <span class="n">was</span> <span class="n">unexpected</span><span class="p">)</span>
</pre></div>
</div>
<p>5) Validation error: <code class="docutils literal notranslate"><span class="pre">&lt;attribute</span> <span class="pre">name&gt;</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">required</span> <span class="pre">property</span></code>
A required attribute name was not included.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;operator&#39;</span><span class="p">]:</span> <span class="s1">&#39;reference_name&#39;</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">required</span> <span class="nb">property</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, IPGP.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>